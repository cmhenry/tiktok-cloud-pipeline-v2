# Audio Processing Pipeline - Environment Variables
# Copy this file to .env and fill in the values
#
# For local development:
#   cp .env.example .env
#   source .env
#
# For production, these are set via Ansible in systemd service files

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_HOST=127.0.0.1
REDIS_PORT=6379

# =============================================================================
# PostgreSQL Configuration
# =============================================================================
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=audio_pipeline
POSTGRES_USER=pipeline
POSTGRES_PASSWORD=your_secure_password_here

# =============================================================================
# S3 Configuration (OpenStack Swift or S3-compatible)
# =============================================================================
S3_ENDPOINT=https://swift.example.edu:8080
S3_ACCESS_KEY=your_s3_access_key
S3_SECRET_KEY=your_s3_secret_key
S3_BUCKET=audio-pipeline

# =============================================================================
# Local Storage (GPU Workers)
# =============================================================================
# Scratch space for archive processing
SCRATCH_ROOT=/data/scratch

# ML model storage
MODELS_ROOT=/data/models

# =============================================================================
# Legacy Volume Paths (Transfer Worker)
# =============================================================================
VOLUME_ROOT=/mnt/data

# =============================================================================
# AWS Transfer Settings
# =============================================================================
# SSH host alias (from ~/.ssh/config)
# AWS_SOURCE_HOST=tt-zrh
# AWS_SOURCE_PATH=/mnt/hub/export/sound

# =============================================================================
# Processing Settings
# =============================================================================
# WhisperX model size
WHISPERX_MODEL=large-v2

# FFmpeg workers for parallel conversion
FFMPEG_WORKERS=4

# Opus bitrate
OPUS_BITRATE=48k

# GPU batch size for inference
GPU_BATCH_SIZE=32

# =============================================================================
# Logging
# =============================================================================
LOG_DIR=/var/log/pipeline

# =============================================================================
# GPU Settings
# =============================================================================
CUDA_VISIBLE_DEVICES=0

# =============================================================================
# Development Settings (MinIO for local S3 testing)
# =============================================================================
# For local development with MinIO:
# S3_ENDPOINT=http://localhost:9000
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin
# S3_BUCKET=audio-pipeline
#
# Start MinIO with:
# docker run -p 9000:9000 -p 9001:9001 \
#   -e MINIO_ROOT_USER=minioadmin \
#   -e MINIO_ROOT_PASSWORD=minioadmin \
#   minio/minio server /data --console-address ":9001"
